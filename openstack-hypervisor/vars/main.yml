---
# vars file for openstack-hypervisor
ansible_deps:
  - shade
  - futures
  - jmespath

auth_creds:
  url: "{{ os_auth_url }}"
  username: "{{ os_username }}"
  password: "{{ os_password }}"
  project: "{{ os_project }}"
  admin:
    username: "{{ os_admin_user }}"
    password: "{{ os_admin_pass }}"
    project: "{{ os_admin_project }}"

# Create a custom flavor for OCP nodes
# 4vcpu / 8GB RAM / 20GB disk
var_create_flavor: true
# Create custom security group
var_setup_security: true
# Create network / subnet
var_setup_network: true
# Image ID to use

flavor:
  name: m1.openshift
  ram: 8192
  vcpus: 4
  disk: 20
  create: true

security_group:
  name: openshift
  desc: OpenShift security group
  rules:
    allow_all_internal:
      protocol: tcp
      port_range_min: -1
      port_range_max: -1
      remote_ip_prefix: "{{ networks.private.openshift_int.subnet_cidr }}"
    allow_8443_public:
      protocol: tcp
      port_range_min: 8443
      port_range_max: 8443
      remote_ip_prefix: "{{ networks.external.public.subnet_cidr }}"
    allow_22_public:
      protocol: tcp
      port_range_min: 22
      port_range_max: 22
      remote_ip_prefix: "{{ networks.external.public.subnet_cidr }}"
